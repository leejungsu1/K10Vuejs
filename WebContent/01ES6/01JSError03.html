<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01JSError03.html</title>
    </head>
<body>
    <button id="btn">클릭</button>
    <p id="demo"></p>
    <script>
        /*
        3-1) 함수의 호출방법에 따라 this의 사용이 모호해진다.
        */
        class Animal{
            //생성자
            constructor(){
                this.name = "고양이";
            }
            /*
            멤버함수 내에서 this를 사용하면 당연히 고양이(name)를
            가르켜야 하지만, 호출하는 주체에 따라 this가 달라지게 된다.
            로딩시에는 window객체가 되고, 버튼을 눌렀을때는 버튼객체를 
            가르키게된다.
            */
            changName = function () {
                /*
                해당코드에서는 this.name은 사용할수없다.
                */
                //document.getElementById("demo").innerHTML += this.name;
                document.getElementById("demo").innerHTML += this;
            }
        }     
        //객체생성
        myAnimal = new Animal();
        //페이지가 로딩될때 : this는 윈도우 객체가 된다.
        window.addEventListener("load", myAnimal.changName);
        //버튼을 클릭했을때 : this는 버튼 객체가 된다.
        document.getElementById("btn").addEventListener("click", myAnimal.changName);
    </script>
</body>
</html>